# IP, IP클래스, IPv4, IPv6
## IP
IP는 Internet Protocol의 약자로 기기간 네트워크 통신을 할 때 쓰는 프로토콜을 의미한다. IP에서 IP 기기의 주소를 나타내는 것이 바로 IP주소이다. 
흔히 우리가 사용하는 IP는 이 IP주소를 의미한다. 우편배달을 예로 들자면 IP주소는 배달 주소를 나타내게 된다. 
즉 IP주소를 사용하는 이유는 각각의 host들을 구분하여 데이터를 정확하게 송수신하기 위해서이다.      

이러한 IP주소는  IPv4와 IPv6 체계로 나뉜다.

### IP 사용 이유
IP주소의 사용이유는 각각의 Host들을 구분하기위해 사용되며, 부여받은 IP는 자기 고유의 IP가 되기에 다른 사람이 사용하면 안된다. 하지만 현재 사용되는 IPv4방식의 IP 수는 한정되어 있기에 모든 Host에게 고유의 IP를 할당하지 못한다. 그렇다고 해서 하나의 호스트에 하나의 IP만 사용되는건 아니다. 이는 한 컴퓨터에 여러 개의 NIC(Network Interface Card / 흔히 랜카드라 불리는 장치)를 장착하여 여러 개의 IP를 사용할 수 있다. 대표적인 네트워크 장비로 라우터가 있다.

일반 가정집같은 경우에는 PC의 '네트워크 설정'에서 확인하실 수 있는  TCP/IP Protocol을 보면 고정 IP가 아닌 유동 IP로 설정이 되어 있는데, 이는 가정집에서 사용하는 PC의 경우 전원이 Off되어 IP 주소가 필요없는 경우가 대부분이기에 모든 기기에 IP를 부여하게 되면 심각한 IP 부족현상이 나타나기 때문이다. 그래서 [DHCP Server](https://github.com/haeyonghahn/TIL/blob/master/Network/DHCP.md)를 이용하여 전원이 켜져있는 컴퓨터에게만 IP를 할당하며, 컴퓨터가 Off되면 IP를 회수하게 된다.

![image](https://user-images.githubusercontent.com/31242766/206393045-a54bcd70-f091-4650-8926-ef4dccb76609.png)

## IPv4
![image](https://user-images.githubusercontent.com/31242766/206383003-fad77eeb-fb13-4ab6-8242-091aa3cc61a2.png)

IPv4는 3자리 숫자가 4마디로 표기되는방식이다. 각 마디는 옥텟(octet)이라고 부른다. 위 주소는 내부적으로 32비트(각 마디당 8bit)로 처리된다. 예를 들어 192.168.123.123은 11000000.10101000.1111011.1111011으로 표시된다.

IPv4는 한 옥탯당 256개(2^8)의 수를 나타낼 수 있어 256^4 = 4,294,967,296 개의 주소를 만들 수 있다. 약 42억 개의 IP를 각각의 컴퓨터에 할당할 수 있는 것이다. 
하지만 인터넷 환경이 발달함에 따라 어마어마하게 많은 수의 IP주소가 필요해져 IPv4 주소 체계로는 IP주소를 할당하기가 어려워졌다. 따라서 새로운 주소 체계인 IPv6가 나오게 되었다.

## IPv4 클래스
![image](https://user-images.githubusercontent.com/31242766/206384726-282c6fb3-ad1d-440c-a160-438b98d65f00.png)

IP 주소는 대역에 따라 A,B,C,D,E 클래스로 나뉜다. 이 클래스들을 구분함으로써 클래스 내에서 Network ID와 Host ID를 구분하게 된다. 각 클래스의 간략한 설명은 다음과 같다.
- A Class : 대규모 네트워크 환경에 쓰이며, 첫번째 마디의 숫자가 0~127까지 사용된다. (ex : 12.123.123.123)
- B Class : 중규모 네트워크 환경에 쓰이며, 첫번째 마디의 숫자가 128~191까지 사용된다. (ex : 128.123.123.123)
- C Class : 소규모 네트워크 환경에 쓰이며, 첫번째 마디의 숫자가 192~223까지 사용된다. (ex : 192.168.0.1)
- D Class : 멀티캐스팅용으로 쓰인다. 잘 쓰이지 않는다.
- E Class : 연구/개발용 혹은 미래에 사용하기 위해 남겨놓은 클래스로 일반적인 용도로 사용되지 않는다.

### IP 주소의 NetworkID와 HostID
하나의 IP주소에는 Network ID와 Host ID가 존재한다. 먼저 Network ID는 인터넷 상에서 모든 Host들을 전부 관리하기 힘들기에 한 Network의 범위를 지정하여 관리하기 쉽게 만들어 낸 것이다. 그리고 Host ID는 호스트들을 개별적으로 관리하기 위해 사용하게 된 것입니다. 따라서 우리가 인터넷을 사용할 때 Routing으로 목적지를 알아내고 찾아가는 등의 역할을 할 때에는 NetworkID와 HostID가 합쳐진 IP주소를 보게 됩니다. 서브넷 마스크에 대해 알고자 하실 때에는 이 부분이 매우 중요합니다.

Subnet mask를 활용하여 Network ID를 올리거나 낮출 수 있게 됩니다. 반대로 Host ID는 줄어들거나 늘어날 수 있게 됩니다. 라우터끼리의 통신에서는 IP를 사용하기에 Network ID와 Host ID보고 목적지가 어떤 네트워크에 속하는지 알 수 있게 됩니다.

예를 들어, 홍대리는 집에 장롱이 필요하여 가구회사에 주문을 했다. 장롱을 가져다 주는 배달원은 주소를 보고 홍대리의 집이 '부산광역시 해운대구 우동 792번지'라는걸 확인하고 도착했다. 그런데 배달원은 집까지 가져왔지만 어느 곳에 두어야 할 지 모른다. 이 때 홍대리가 작은 방의 한쪽 구석을 가리키며 정확한 위치를 알려주었다. 이 예시를 보면 배달원의 역할은 최종 목적지가 속한 지역(집)까지 전달하는 Network ID에 해당한다. 그리고 홍대리는 자신의 지역(집)에서 최종적으로 장롱을 두어야 하는 위치를 안내하여 주기에 Host ID의 역할로 보면 된다.

## IPv6
위에서 IP 주소가 부족해 IPv6가 나오게 되었다고 설명했다. IPv6는 IPv4와 다르게 32비트가 아닌 128비트 체계의 인터넷 프로토콜을 의미한다. 즉 2^128 = 340,282,366,920,938,463,463,374,607,431,768,211,456 개의 주소를 할당할 수 있다. IPv6는 각 16비트씩 8자리로 각 자리를 ':'으로 구분한다. 

문제는 아직까지도 IPv4에서 IPv6로의 전환이 완료되지 않았다는 점이다. 아직까지도 많은 라우터들은 IPv4를 사용한다. IPv6로의 전환은 많은 시간과 비용이 들기 때문에 완료되기까지 적지 않은 세월이 걸릴 것이다. 현재는 IPv4와 IPv6를 혼용해서 사용하는데, IPv4 라우터에서는 tunneling이라는 방식을 사용해 IPv6 데이터그램을 전송한다.

## 출처
https://code-lab1.tistory.com/33     
http://korean-daeddo.blogspot.com/2015/12/ip.html
