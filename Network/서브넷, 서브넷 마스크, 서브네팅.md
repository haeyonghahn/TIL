# 서브넷, 서브넷 마스크, 서브네팅
## 서브넷(Subnet)
IPv4는 초기에 부족한 IP 주소를 해결하기위해 IP 클래스로 나누어서 할당한다.
- A Class
  - 네트워크 주소 범위 : 1.0.0.0 ~ 126.0.0.0
  - Host ID 개수 : 약 1670만개
- B Class
  - 네트워크 주소 범위 : 128.0.0.0 ~ 191.255.0.0
  - Host ID 개수 : 65,536개
- C Class
  - 네트워크 주소 범위 : 192.0.0.0 ~ 223.255.255.0
  - Host ID 개수 : 256개

하지만 이 방식이 비효율적이다.   
`B Class` 를 어느 중소기업체에게 할당했을 경우 만일 그 기업이 65,000여개의 아이피를 다 쓰는 것이 아닌 10,000개 정도만 쓴다고 가정해보자.
그럼 나머지 50,000 개의 IP는 쓰이지 않은 채 이 기업체는 클래스 B의 하나를 점유하고 있는 상태가 되어 버린다.    
그렇다고 이 기업체에게 `C Class`(256개)를 할당하자니 IP자원이 너무 부족하게 되어 버린다.

즉, 호스트 수에 맞게 IP를 클래스별로 나누어 놓았더니만 안하만도 못한 현상이 발생한 것이다. 이러한 문제를 해결하기 위해 IP 를 사용하는 
네트워크 장치 수에 따라 효율적으로 사용할 수 있는 `서브넷(Subnet)` 개념이 등장했다.
1. 서브넷(Subnet) 이라는 것은 하나의 네트워크가 분할되어 나눠진 작은 네트워크이다.
2. 서브넷을 만들기위해 네트워크를 분할하는 것을 서브네팅(Subnettin)이라고 한다.   
서브네팅을 하면 IP 할당 범위를 더 작은 단위로 쪼갤수 있게 된다.   
그래서 만일 ip가 100개만 필요하다면 C클래스(256개)를 더 쪼개서 줄 수 있다.
3. 그리고 이 서브네팅을 서브넷 마스크(Subnet Mask)를 통하여 계산되어 수행된다.

## 서브넷 마스크 (Subnet Mask)
서브넷 마스크는 ip주소에서 네트워크 ID와 호스트 ID로 구분하기 위한 목적으로 만들어 졌다.

물론 ip클래스마다 주소 범위가 정해져있어서 앞자리만 보고도 어느 클래스인지 판별할 수는 있긴 하지만 보다 쉽게 구분하기 위해서 고유의 표기법으로 구분한다고 이해하면 된다.

### 서브넷 마스크 표현
서브넷 마스크는 IP주소와 똑같은 32비트 2진수로 표현된다.   
`255.255.255.0`   
여기서 아이피와 표현이 다른 점은 `서브넷 마스크는 연속된 1과 연속된 0으로 구성`되어있다는 것이다.
즉, `10011111.11011111.11110011.00000000` 와 같이 1 중간에 0 이 들어오는 값은 가질 수 없고
`11111111.11111111.11111100.00000000`의 1이 연속되거나 아닌 형태만 가질 수 있다는 말이다.

앞에서 서브넷 마스크는 네트워크 아이디와 호스트 아이디를보다 편하게 구분하기 위해 사용된다고 말했다.   
서브넷 마스크 옥텟(1바이트)가 255면 즉 네트워크 아이디를 가리키게 되는 것이다.   
그래서 아주 간단하게 IP주소와 서브넷 마스크를 이용해서 이 IP가 어느 클래스인지 알 수 있다.   
![image](https://user-images.githubusercontent.com/31242766/209814934-d00ccf52-136e-4902-9757-cd434b7b3657.png)

### Prefix 표현
서브넷 마스크를 위보다 더욱 간소화해서 표현할 수도 있다.   
바로 비트를 이용한 방법인데, IP 주소가 192.168.0.1/24 라면 뒤에 /24가 서브넷 마스크를 표현한 것이다.

`/24` 라는 뜻은 32비트 중 앞에서부터 차례대로 `1의 개수가 24개`라는 의미이다. 나머지 32-24=16은 0으로 채워주면 서브넷 마스크 숫자가 되는 것이다.   
`/24  →  11111111.11111111.11111111.00000000`

기존의 서브넷을 나타내는 방법 255.255.255.0 을 /24 즉, 네트워크에 해당하는 비트의 수로 표시하는 방식을 말한다고 보면 된다.   
이렇게 하면 IP 주소를 입력할 때 `192.168.1.17 255.255.255.0` 를 `192.168.1.17/24`로 간략히 줄일 수 있게 된다.   
서브넷 정보를 알려주기 위해 기존에는 4B가 필요했지만 6bit만 있으면 해당 정보를 전달할 수 있어서 네트워크 리소스를 절약할 수 있다.   
- 10.10.10.10/8 → A클래스
- 172.16.1.10/16 → B클래스
- 192.168.100.10/24 → C클래스

![image](https://user-images.githubusercontent.com/31242766/209815352-9ec203b7-d3b0-4522-b7f9-7bf65cec7f17.png)

## 서브네팅 (Subnetting)
서브네팅이란 간단하게 말하자면 IP주소를 효울적으로 나누어 사용하기 위한 방법을 일컫는다.   
네트워크 성능 보장, 자원을 효율적으로 분배하기 위해 네트워크 영역과 호스트 영역을 쪼개는 작업을 행한다.   
서브넷팅을 하면 IP 할당 범위를 더 작은 단위로 나눌 수 있게 된다. (자신의 네트워크 주소를 더 작은 서브 네트워크로 2의 배수로 나누는 과정)

아래 사진과 같이,   
만일 `호스트를 50개`만 사용하는 기업이 `192.168.10.0/24` 아이피 주소를 사용한다면 가정하면, C클래스이니까 총 256개의 주소를 할당하게 되는데, 
256개 전체를 주기에는 낭비가 되니까, 이 256개를 절반으로 나누고(128개) 또 절반으로 나눈(64개) 주소를 기업에게 할당하고 남는 네트워크 주소는 
다른 사용처로 할당하는 효율적인 작업이 바로 서브네팅 원리이다.
![image](https://user-images.githubusercontent.com/31242766/209815625-d3dd7a25-a096-46db-9c2f-d145e65cb6e8.png)

## 슈퍼넷팅 (Supernetting)
서브넷팅이 네트워크를 분할하는것 이었다면, 슈퍼넷팅은 `반대의 개념`이다. `네트워크를 합치는 것`을 슈퍼넷팅이라고 한다.

예를들어 192.168.10.0/24를 사용하면 192.168.10.0~192.168.10.255 범위에서 254(네트워크, 브로르캐스트 주소 제외)개의 호스트를 가질 수 있게 된다.
그런데 만일 이 네트워크에 몇명이 추가로 들어와서 500개 분의 더 많은 호스트가 필요하게 되었다면 어떻게 할까?

C클래스의 모든 대역폭으로는 갯수가 부족하니까 B클래스 대역폭을 통째로 주어야 할까?
여기서 슈퍼네팅이 힘을 발휘하는데, 바로바로 `C클래스 2개를 합쳐서 하나의 네트워크로 구성`하여 사용할 수 있다.

방법은 간단하다. 서브넷 마스크를 이동시키면 된다.
`192.168.10.0/24` 에서 `192.168.10.0/23`으로 prefix숫자를 감소시킨다.
prefix 숫자가 감소시킨다는 것은 곧 호스트ID 갯수가 늘어난다는 뜻과 같다.

`192.168.10.0/23` 를 서브넷 마스크와 2진수로 표현해보면 다음과 같이 된다.
- 아이피 : 11000000.10101000.00001010.00000000 (192.168.10.0)
- 서브넷 마스크 : 11111111.11111111.11111110.00000000 (255.255.254.0)

즉, 서브넷 마스크의 1의 갯수가 23개가 되니 호스트 ID의 비트수는 9개가 되고, 2^9=512 니까
192.168.10.0 ~ 192.168.11.255 의 범위를 가지게 된다.
그러면 C클래스 두개를 합쳐 256 X 2 = 512 - 2(특수목적 IP) = 510 개의 호스트를 가질 수 있는 네트워크가 완성되어 진다.

## 출처
https://inpa.tistory.com/entry/WEB-IP-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%84%9C%EB%B8%8C%EB%84%B7-%EB%A7%88%EC%8A%A4%ED%81%AC-%EC%84%9C%EB%B8%8C%EB%84%B7%ED%8C%85-%EC%B4%9D%EC%A0%95%EB%A6%AC
