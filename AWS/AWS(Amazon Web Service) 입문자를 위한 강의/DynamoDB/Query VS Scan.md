# Query VS Scan
DynamoDB의 데이터를 읽어오는 두 가지 방법에 대해 알아보자.

## Query
- Primary Key를 사용하여 데이터 검색
- Query사용시 모든 데이터(컬럼) 반환
- ProjectionExpression 파라미터   
- 예를 들어, 슈퍼마켓에서 물건을 팔 때 물건을 스캔하면 가격, 거래아이디, 거래시간 기록이 남는다고 가정하자. 데이터를 `Query`할 때 거래아이디 `AAA`를 사용한다면 
  데이터베이스에 들어있는 거래아이디 `AAA`를 다음과 같이 가져오는 것이다. 여기서 모든 데이터란 `모든 컬럼`을 의미한다. 만약에 쿼리를 돌려서 나온 결과가 여러 개라면 
  추가적으로 정렬키를 제공하여 정말 필요로하는 데이터를 가져올 수 있다. 이처럼 거래아이디 `AAA`는 3번 있었고 그 중 최근에 성사된 거래만 가지고 오고 싶다면 언제 팔렸는지 
  알 수 있는 `거래시간`을 정렬키로 사용하면 된다. 또한, 모든 컬럼이 반환되었지만 `ProjectionExpression 파라미터`를 사용하여 보고싶은 컬럼만 수정할 수 있다.    
  ![image](https://user-images.githubusercontent.com/31242766/219362073-db353783-3002-4e35-a1c2-79522a27d9a1.png)

### Scan
- `Scan` 은 모든 데이터를 가져온 다음, 따로 필터를 추가하여 우리가 원하는 데이터를 볼 수 있다는 점이 `Query`와 가장 큰 차이점이다. 
  `Query`는 데이터를 가져올 때 이미 파티션이 적용되어 있는 반면 `Scan`은 그렇지 않다.
- 모든 데이터를 불러옴 (primary key 사용 X)
- ProjectionExpression 파라미터
- Query가 Scan보다 훨씬 효율적임
- 따라서 Query 사용 추천

__Scan을 쓰는 경우__     
테이블의 크기가 크지 않고 테이블의 primary key 정의가 필요없는 즉, lookup 용도로 사용되는 테이블을 보고싶다면 
`Scan`을 사용해도 무방하다. 예를들어, 아래와 같은 상품 테이블은 크기가 크지 않을 것이다. 심지어 primary key도 존재하지 않을 것이다.   
> 참고 : lookup 테이블이란?    
> 실시간으로 업데이트되는 테이블과는 달리 단순히 참고용으로 데이터 딕셔너리를 정의하고 보관되어지는 테이블을 말한다.   
> 또한, 데이터의 중복이 거의 일어나지 않는다.   
> ![image](https://user-images.githubusercontent.com/31242766/219365057-46ce4bb5-9a7c-4abc-91c8-7c9ed22f9960.png)
