# 프록시와 연관관계 정리
## 프록시
엔티티를 조회할 때 연관된 엔티티들이 항상 사용되는 것은 아니다. 예를 들어 회원 엔티티를 조회할 때 연관된 팀 엔티티는 비즈니스 로직에 따라 사용될 때도 있지만 그렇지 않을 때도 있다.   

====== 회원과 팀 정보를 출력하는 비즈니스 로직 ======     
```java
public void printUserAndTeam(String memberId) {
 Member member = em.find(Member.class, memberId);
 Team team = member.getTeam();
 System.out.println("회원 이름 : " + member.getUsername());
 System.out.println("소속팀 : " + team.getName()); //**
}
```
====== 회원 정보만 출력하는 비즈니스 로직 ======     
```java
public String printUser(String memberId) {
 Member member = em.find(Member.class, memberId);
 System.out.println("회원 이름 : " + member.getUsername());
}
```
`printUserAndTeam()` 메서드는 `memberId` 로 회원 엔티티를 찾아서 회원은 물론이고 회원과 연관된 팀의 이름도 출력한다. 반면에 `printUser()` 메서드는 회원 엔티티만 출력하는데 사용하고 회원과 연관된 팀 엔티티는 전혀 사용하지 않는다.    

`printUser()` 메서드는 회원 엔티티만 사용하므로 `em.find()` 로 회원 엔티티를 조회할 때 회원과 연관된 팀 엔티티( `Member.team` )까지 데이터베이스에서 함께 조회해 두는 것은 효율적이지 않다.

JPA는 이런 문제를 해결하려고 엔티티가 실제 사용될 때까지 데이터베이스 조회를 지연하는 방법을 제공하는데 이것을 지연 로딩이라 한다. 쉽게 이야기해서 `team.getName()` 처럼 팀 엔티티의 값을 실제 사용하는 시점에 데이터베이스에서 팀 엔티티에 필요한 데이터를 조회하는 것이다. 이 방법을 사용하면 `printUser()` 메서드는 회원 데이터만 데이터베이스에서 조회해도 된다.   

그런데 지연 로딩 기능을 사용하려면 실제 엔티티 객체 대신에 데이터베이스 조회를 지연할 수 있는 가짜 객체가 필요한데 이것을 프록시 객체라 한다.
